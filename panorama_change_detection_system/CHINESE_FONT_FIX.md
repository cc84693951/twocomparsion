# ä¸­æ–‡å­—ä½“æ˜¾ç¤ºé—®é¢˜è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°
åœ¨ç”Ÿæˆçš„å›¾è¡¨ä¸­ï¼Œä¸­æ–‡æ–‡å­—æ˜¾ç¤ºä¸ºæ–¹æ¡†(â–¡)æˆ–ä¹±ç ï¼Œæ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. è‡ªåŠ¨å­—ä½“æ£€æµ‹ä¸é…ç½®
å·²åœ¨ `utils/visualization.py` ä¸­å®ç°äº†è·¨å¹³å°çš„ä¸­æ–‡å­—ä½“è‡ªåŠ¨æ£€æµ‹ï¼š

```python
def setup_chinese_fonts():
    """é…ç½®ä¸­æ–‡å­—ä½“æ”¯æŒ"""
    system = platform.system()
    
    if system == 'Darwin':  # macOS
        fonts = ['Heiti TC', 'PingFang SC', 'Hiragino Sans GB', 'STHeiti', 'Arial Unicode MS', 'DejaVu Sans']
    elif system == 'Windows':  # Windows
        fonts = ['SimHei', 'Microsoft YaHei', 'KaiTi', 'FangSong', 'STSong', 'DejaVu Sans']
    else:  # Linux
        fonts = ['WenQuanYi Micro Hei', 'WenQuanYi Zen Hei', 'Noto Sans CJK SC', 'DejaVu Sans', 'Liberation Sans']
```

### 2. æ”¯æŒçš„ç³»ç»ŸåŠå­—ä½“

#### macOSç³»ç»Ÿ
- âœ… Heiti TC (é»‘ä½“ç¹ä½“) - **å½“å‰ä½¿ç”¨**
- âœ… PingFang SC (è‹¹æ–¹ç®€ä½“)
- âœ… Hiragino Sans GB (å†¬é’é»‘ä½“)
- âœ… STHeiti (åæ–‡é»‘ä½“)
- âœ… Arial Unicode MS

#### Windowsç³»ç»Ÿ
- SimHei (é»‘ä½“)
- Microsoft YaHei (å¾®è½¯é›…é»‘)
- KaiTi (æ¥·ä½“)
- FangSong (ä»¿å®‹)
- STSong (åæ–‡å®‹ä½“)

#### Linuxç³»ç»Ÿ
- WenQuanYi Micro Hei (æ–‡æ³‰é©¿å¾®ç±³é»‘)
- WenQuanYi Zen Hei (æ–‡æ³‰é©¿æ­£é»‘)
- Noto Sans CJK SC (æ€æºé»‘ä½“ç®€ä½“)

### 3. æµ‹è¯•éªŒè¯
è¿è¡Œå­—ä½“æµ‹è¯•è„šæœ¬éªŒè¯é…ç½®ï¼š
```bash
python test_chinese_fonts.py
```

#### æµ‹è¯•ç»“æœç¤ºä¾‹ï¼š
```
ä½¿ç”¨ä¸­æ–‡å­—ä½“: Heiti TC
å½“å‰å­—ä½“è®¾ç½®: ['Heiti TC', 'DejaVu Sans', ...]
âœ… æµ‹è¯•å›¾ç‰‡å·²ä¿å­˜: chinese_font_test_20250918_154317.png
```

### 4. å·²è§£å†³çš„é—®é¢˜

#### âœ… å‰ï¼šæ–¹æ¡†æ˜¾ç¤º
```
ç»Ÿè®¡ä¿¡æ¯ï¼š â–¡â–¡â–¡ 
æ£€æµ‹ç»“æœï¼š â–¡â–¡â–¡â–¡
ç½®ä¿¡åº¦ï¼š   â–¡â–¡â–¡
```

#### âœ… åï¼šæ­£å¸¸ä¸­æ–‡æ˜¾ç¤º
```
ç»Ÿè®¡ä¿¡æ¯ï¼š æ£€æµ‹ç»Ÿè®¡
æ£€æµ‹ç»“æœï¼š å˜åŒ–åŒºåŸŸæ£€æµ‹
ç½®ä¿¡åº¦ï¼š   é«˜ç½®ä¿¡åº¦
```

### 5. å¸¸è§é—®é¢˜è§£å†³

#### é—®é¢˜1ï¼šä»ç„¶æ˜¾ç¤ºæ–¹æ¡†
**åŸå› **ï¼šç³»ç»Ÿç¼ºå°‘ä¸­æ–‡å­—ä½“  
**è§£å†³**ï¼šå®‰è£…ä¸­æ–‡å­—ä½“åŒ…
```bash
# macOS - é€šå¸¸å·²é¢„è£…
# Windows - é€šå¸¸å·²é¢„è£…
# Ubuntu/Debian
sudo apt-get install fonts-noto-cjk fonts-wqy-zenhei
# CentOS/RHEL
sudo yum install google-noto-cjk-fonts wqy-zenhei-fonts
```

#### é—®é¢˜2ï¼šéƒ¨åˆ†emojiæ˜¾ç¤ºè­¦å‘Š
**ç°è±¡**ï¼šğŸ“Š ğŸ“ˆ ç­‰emojiå­—ç¬¦æ˜¾ç¤ºè­¦å‘Š  
**å½±å“**ï¼šä¸å½±å“ä¸­æ–‡å­—ç¬¦æ­£å¸¸æ˜¾ç¤º  
**è§£å†³**ï¼šå¯å¿½ç•¥æˆ–ç§»é™¤emojiå­—ç¬¦

### 6. æ‰‹åŠ¨é…ç½®é€‰é¡¹
å¦‚æœè‡ªåŠ¨é…ç½®å¤±è´¥ï¼Œå¯æ‰‹åŠ¨æŒ‡å®šå­—ä½“ï¼š

```python
import matplotlib.pyplot as plt

# æ–¹æ³•1ï¼šå…¨å±€è®¾ç½®
plt.rcParams['font.sans-serif'] = ['Heiti TC']  # macOS
plt.rcParams['font.sans-serif'] = ['SimHei']    # Windows
plt.rcParams['axes.unicode_minus'] = False

# æ–¹æ³•2ï¼šä¸´æ—¶è®¾ç½®
plt.title('ä¸­æ–‡æ ‡é¢˜', fontfamily='Heiti TC')
```

### 7. éªŒè¯æ­¥éª¤

1. **è¿è¡Œå­—ä½“æµ‹è¯•**
   ```bash
   cd panorama_change_detection_system
   python test_chinese_fonts.py
   ```

2. **æ£€æŸ¥è¾“å‡º**
   - æ§åˆ¶å°æ˜¾ç¤º "ä½¿ç”¨ä¸­æ–‡å­—ä½“: [å­—ä½“å]"
   - ç”Ÿæˆæµ‹è¯•å›¾ç‰‡æ–‡ä»¶
   - æ‰“å¼€å›¾ç‰‡æ£€æŸ¥ä¸­æ–‡æ˜¾ç¤º

3. **è¿è¡Œå®Œæ•´ç³»ç»Ÿ**
   ```bash
   python main.py
   ```

### 8. æŠ€æœ¯å®ç°ç»†èŠ‚

- **è‡ªåŠ¨æ£€æµ‹**ï¼šæ‰«æç³»ç»Ÿå¯ç”¨å­—ä½“åˆ—è¡¨
- **ä¼˜å…ˆçº§æ’åº**ï¼šæŒ‰å¹³å°é€‰æ‹©æœ€é€‚åˆçš„ä¸­æ–‡å­—ä½“
- **å›é€€æœºåˆ¶**ï¼šå¦‚æœæ²¡æœ‰ä¸­æ–‡å­—ä½“ï¼Œä½¿ç”¨Unicodeå…¼å®¹å­—ä½“
- **å…¨å±€é…ç½®**ï¼šä¸€æ¬¡è®¾ç½®ï¼Œæ‰€æœ‰matplotlibå›¾è¡¨ç”Ÿæ•ˆ

### 9. æ€§èƒ½å½±å“
- å­—ä½“æ£€æµ‹ä»…åœ¨å¯¼å…¥æ—¶æ‰§è¡Œä¸€æ¬¡
- ä¸å½±å“å›¾è¡¨ç”Ÿæˆæ€§èƒ½
- å†…å­˜ä½¿ç”¨å¢åŠ å¾®ä¹å…¶å¾®

---

## æ›´æ–°è®°å½•
- 2024-09-18: å®ç°è·¨å¹³å°ä¸­æ–‡å­—ä½“è‡ªåŠ¨é…ç½®
- 2024-09-18: æ·»åŠ å­—ä½“æµ‹è¯•éªŒè¯è„šæœ¬
- 2024-09-18: éªŒè¯macOS Heiti TCå­—ä½“æ­£å¸¸å·¥ä½œ
